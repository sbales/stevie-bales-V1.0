!function($){"use strict";var t=jQuery.fn.revolution,e={alias:"KenBurns Min JS",name:"revolution.extensions.kenburn.min.js",min_core:"5.4",version:"1.3.1"};jQuery.extend(!0,t,{stopKenBurn:function(a){if("stop"===t.compare_version(e).check)return!1;void 0!=a.data("kbtl")&&a.data("kbtl").pause()},startKenBurn:function(a,r,n){if("stop"===t.compare_version(e).check)return!1;var i=a.data(),s=a.find(".defaultimg"),o=s.data("lazyload")||s.data("src"),d=i.owidth/i.oheight,l="carousel"===r.sliderType?r.carousel.slide_width:r.ul.width(),h=r.ul.height(),p=l/h;if(a.data("kbtl")&&a.data("kbtl").kill(),n=n||0,0==a.find(".tp-kbimg").length){var u=s.data("mediafilter");u=void 0===u?"":u,a.append('<div class="tp-kbimg-wrap '+u+'" style="z-index:2;width:100%;height:100%;top:0px;left:0px;position:absolute;"><img class="tp-kbimg" src="'+o+'" style="position:absolute;" width="'+i.owidth+'" height="'+i.oheight+'"></div>'),a.data("kenburn",a.find(".tp-kbimg"))}var c=function(t,e,a,r,n,i,s){var o=t*a,d=e*a,l=Math.abs(r-o),h=Math.abs(n-d),p=new Object;return p.l=(0-i)*l,p.r=p.l+o,p.t=(0-s)*h,p.b=p.t+d,p.h=i,p.v=s,p},b=function(t,e,a,r,n){var i=t.bgposition.split(" ")||"center center",s="center"==i[0]?"50%":"left"==i[0]||"left"==i[1]?"0%":"right"==i[0]||"right"==i[1]?"100%":i[0],o="center"==i[1]?"50%":"top"==i[0]||"top"==i[1]?"0%":"bottom"==i[0]||"bottom"==i[1]?"100%":i[1];s=parseInt(s,0)/100||0,o=parseInt(o,0)/100||0;var d=new Object;return d.start=c(n.start.width,n.start.height,n.start.scale,e,a,s,o),d.end=c(n.start.width,n.start.height,n.end.scale,e,a,s,o),d},g=function(t,e,a){var r=a.scalestart/100,n=a.scaleend/100,i=void 0!=a.offsetstart?a.offsetstart.split(" ")||[0,0]:[0,0],s=void 0!=a.offsetend?a.offsetend.split(" ")||[0,0]:[0,0];a.bgposition="center center"==a.bgposition?"50% 50%":a.bgposition;var o=new Object,d=t*r,l=d/a.owidth*a.oheight,h=t*n,p=h/a.owidth*a.oheight;if(o.start=new Object,o.starto=new Object,o.end=new Object,o.endo=new Object,o.start.width=t,o.start.height=o.start.width/a.owidth*a.oheight,o.start.height<e){var u=e/o.start.height;o.start.height=e,o.start.width=o.start.width*u}o.start.transformOrigin=a.bgposition,o.start.scale=r,o.end.scale=n,a.rotatestart=0===a.rotatestart?.01:a.rotatestart,o.start.rotation=a.rotatestart+"deg",o.end.rotation=a.rotateend+"deg";var c=b(a,t,e,i,o);i[0]=parseFloat(i[0])+c.start.l,s[0]=parseFloat(s[0])+c.end.l,i[1]=parseFloat(i[1])+c.start.t,s[1]=parseFloat(s[1])+c.end.t;var g=c.start.r-c.start.l,f=c.start.b-c.start.t,v=c.end.r-c.end.l,w=c.end.b-c.end.t;return i[0]=i[0]>0?0:g+i[0]<t?t-g:i[0],s[0]=s[0]>0?0:v+s[0]<t?t-v:s[0],i[1]=i[1]>0?0:f+i[1]<e?e-f:i[1],s[1]=s[1]>0?0:w+s[1]<e?e-w:s[1],o.starto.x=i[0]+"px",o.starto.y=i[1]+"px",o.endo.x=s[0]+"px",o.endo.y=s[1]+"px",o.end.ease=o.endo.ease=a.ease,o.end.force3D=o.endo.force3D=!0,o};void 0!=a.data("kbtl")&&(a.data("kbtl").kill(),a.removeData("kbtl"));var f=a.data("kenburn"),v=f.parent(),w=g(l,h,i),k=new punchgs.TimelineLite;if(k.pause(),w.start.transformOrigin="0% 0%",w.starto.transformOrigin="0% 0%",k.add(punchgs.TweenLite.fromTo(f,i.duration/1e3,w.start,w.end),0),k.add(punchgs.TweenLite.fromTo(v,i.duration/1e3,w.starto,w.endo),0),void 0!==i.blurstart&&void 0!==i.blurend&&(0!==i.blurstart||0!==i.blurend)){var m={a:i.blurstart},x={a:i.blurend,ease:w.endo.ease},j=new punchgs.TweenLite(m,i.duration/1e3,x);j.eventCallback("onUpdate",function(t){punchgs.TweenLite.set(t,{filter:"blur("+m.a+"px)",webkitFilter:"blur("+m.a+"px)"})},[v]),k.add(j,0)}k.progress(n),k.play(),a.data("kbtl",k)}})}(jQuery);