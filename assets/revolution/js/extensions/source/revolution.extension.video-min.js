!function($){"use strict";function e(e){return void 0==e?-1:jQuery.isNumeric(e)?e:e.split(":").length>1?60*parseInt(e.split(":")[0],0)+parseInt(e.split(":")[1],0):e}var t=jQuery.fn.revolution,a=t.is_mobile(),i=t.is_android(),o={alias:"Video Min JS",name:"revolution.extensions.video.min.js",min_core:"5.4.6.4",version:"2.2.0"};jQuery.extend(!0,t,{preLoadAudio:function(e,a){if("stop"===t.compare_version(o).check)return!1;e.find(".tp-audiolayer").each(function(){var e=jQuery(this),i={};0===e.find("audio").length&&(i.src=void 0!=e.data("videomp4")?e.data("videomp4"):"",i.pre=e.data("videopreload")||"",void 0===e.attr("id")&&e.attr("audio-layer-"+Math.round(199999*Math.random())),i.id=e.attr("id"),i.status="prepared",i.start=jQuery.now(),i.waittime=1e3*e.data("videopreloadwait")||5e3,"auto"!=i.pre&&"canplaythrough"!=i.pre&&"canplay"!=i.pre&&"progress"!=i.pre||(void 0===a.audioqueue&&(a.audioqueue=[]),a.audioqueue.push(i),t.manageVideoLayer(e,a)))})},preLoadAudioDone:function(e,t,a){t.audioqueue&&t.audioqueue.length>0&&jQuery.each(t.audioqueue,function(t,i){e.data("videomp4")!==i.src||i.pre!==a&&"auto"!==i.pre||(i.status="loaded")})},resetVideo:function(i,o,d,r){var n=i.data();switch(n.videotype){case"youtube":var s=n.player;try{if("on"==n.forcerewind){var l=e(i.data("videostartat")),u=-1==l,p=1===n.bgvideo||i.find(".tp-videoposter").length>0;void 0!=n.player&&(l=-1==l?0:l,n.player.seekTo(l),n.player.pauseVideo())}}catch(e){}0==i.find(".tp-videoposter").length&&1!==n.bgvideo&&!0!==d&&punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"vimeo":if(!r){var v=i.data("vimeoplayer");try{if("on"==n.forcerewind){var l=e(n.videostartat),c=0,u=-1==l,p=1===n.bgvideo||i.find(".tp-videoposter").length>0;l=-1==l?0:l,(0!==l&&!u||p)&&(v.setCurrentTime(l),v.pause())}}catch(e){}}0==i.find(".tp-videoposter").length&&1!==n.bgvideo&&!0!==d&&punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"html5":if(a&&1==n.disablevideoonmobile)return!1;var m="html5"==n.audio?"audio":"video",g=i.find(m),y=g[0];if(punchgs.TweenLite.to(g,.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"on"==n.forcerewind&&!i.hasClass("videoisplaying"))try{var l=e(n.videostartat);y.currentTime=-1==l?0:l}catch(e){}("mute"==n.volume||t.lastToggleState(i.videomutetoggledby)||!0===o.globalmute)&&(y.muted=!0);break}},isVideoMuted:function(e,t){var a=!1,i=e.data();switch(i.videotype){case"youtube":try{a=i.player.isMuted()}catch(e){}break;case"vimeo":try{"mute"==i.volume&&(a=!0)}catch(e){}break;case"html5":var o="html5"==i.audio?"audio":"video";e.find(o)[0].muted&&(a=!0);break}return a},muteVideo:function(e,t){var a=e.data();switch(a.videotype){case"youtube":try{a.player.mute()}catch(e){}break;case"vimeo":try{var i=e.data("vimeoplayer");e.data("volume","mute"),i.setVolume(0)}catch(e){}break;case"html5":var o="html5"==a.audio?"audio":"video";e.find(o)[0].muted=!0;break}},unMuteVideo:function(e,t){if(!0!==t.globalmute){var a=e.data();switch(a.videotype){case"youtube":try{a.player.unMute()}catch(e){}break;case"vimeo":try{var i=e.data("vimeoplayer");e.data("volume","1"),i.setVolume(1)}catch(e){}break;case"html5":var o="html5"==a.audio?"audio":"video";e.find(o)[0].muted=!1;break}}},stopVideo:function(e,t){var a=e.data();switch(t.leaveViewPortBasedStop||(t.lastplayedvideos=[]),t.leaveViewPortBasedStop=!1,a.videotype){case"youtube":try{var i=a.player;if(2===i.getPlayerState()||5===i.getPlayerState())return;i.pauseVideo(),a.youtubepausecalled=!0,setTimeout(function(){a.youtubepausecalled=!1},80)}catch(e){console.log("Issue at YouTube Video Pause:"),console.log(e)}break;case"vimeo":try{e.data("vimeoplayer").pause(),a.vimeopausecalled=!0,setTimeout(function(){a.vimeopausecalled=!1},80)}catch(e){console.log("Issue at Vimeo Video Pause:"),console.log(e)}break;case"html5":var o="html5"==a.audio?"audio":"video",d=e.find(o),r=d[0];void 0!=d&&void 0!=r&&r.pause();break}},playVideo:function(a,i){clearTimeout(a.data("videoplaywait"));var o=a.data();switch(o.videotype){case"youtube":if(0==a.find("iframe").length)a.append(a.data("videomarkup")),s(a,i,!0);else if(void 0!=o.player.playVideo){var r=e(a.data("videostartat")),n=o.player.getCurrentTime();1==a.data("nextslideatend-triggered")&&(n=-1,a.data("nextslideatend-triggered",0)),-1!=r&&r>n&&o.player.seekTo(r),!0!==o.youtubepausecalled&&o.player.playVideo()}else a.data("videoplaywait",setTimeout(function(){!0!==o.youtubepausecalled&&t.playVideo(a,i)},50));break;case"vimeo":if(0==a.find("iframe").length)a.removeData("vimeoplayer"),a.append(a.data("videomarkup")),s(a,i,!0);else if(a.hasClass("rs-apiready")){var l=a.find("iframe").attr("id"),u;a.data("vimeoplayer")?u=a.data("vimeoplayer"):(u=new Vimeo.Player(l),a.data("vimeoplayer",u)),u.getPaused()?setTimeout(function(){var t=e(a.data("videostartat")),i=a.data("currenttime");i||(i=0),1==a.data("nextslideatend-triggered")&&(i=-1,a.data("nextslideatend-triggered",0)),-1!=t&&t>i&&u.setCurrentTime(t),u.play()},510):a.data("videoplaywait",setTimeout(function(){!0!==o.vimeopausecalled&&t.playVideo(a,i)},50))}else a.data("videoplaywait",setTimeout(function(){!0!==o.vimeopausecalled&&t.playVideo(a,i)},50));break;case"html5":var p="html5"==o.audio?"audio":"video",v=a.find(p),c=v[0];if(1!=v.parent().data("metaloaded"))d(c,"loadedmetadata",function(a){t.resetVideo(a,i),c.play();var o=e(a.data("videostartat")),d=c.currentTime;1==a.data("nextslideatend-triggered")&&(d=-1,a.data("nextslideatend-triggered",0)),-1!=o&&o>d&&(c.currentTime=o)}(a));else{c.play();var r=e(a.data("videostartat")),n=c.currentTime;1==a.data("nextslideatend-triggered")&&(n=-1,a.data("nextslideatend-triggered",0)),-1!=r&&r>n&&(c.currentTime=r)}break}},isVideoPlaying:function(e,t){var a=!1;return void 0!=t.playingvideos&&jQuery.each(t.playingvideos,function(t,i){e.attr("id")==i.attr("id")&&(a=!0)}),a},removeMediaFromList:function(e,t){c(e,t)},prepareCoveredVideo:function(e,a){if(void 0===a.data("vimeoid")||void 0!==a.data("vimeoplayerloaded")){var i={};if(i.ifr=a.find("iframe, video"),i.asp=a.data("aspectratio"),i.wa=i.asp.split(":")[0],i.ha=i.asp.split(":")[1],i.vd=i.wa/i.ha,0===e.conw||0===e.conh)return t.setSize(e),clearTimeout(i.ifr.data("resizelistener")),void i.ifr.data("resizelistener",setTimeout(function(){t.prepareCoveredVideo(e,a)},100));var o=e.conw/e.conh,d=o/i.vd*100,r=i.vd/o*100;o>i.vd?punchgs.TweenLite.set(i.ifr,{height:d+"%",width:"100%",top:-(d-100)/2+"%",left:"0px",position:"absolute"}):punchgs.TweenLite.set(i.ifr,{width:r+"%",height:"100%",left:-(r-100)/2+"%",top:"0px",position:"absolute"}),i.ifr.hasClass("resizelistener")||(i.ifr.addClass("resizelistener"),jQuery(window).resize(function(){t.prepareCoveredVideo(e,a),clearTimeout(i.ifr.data("resizelistener")),i.ifr.data("resizelistener",setTimeout(function(){t.prepareCoveredVideo(e,a)},90))}))}},checkVideoApis:function(e,t,a){var i="https:"===location.protocol?"https":"http";if((void 0!=e.data("ytid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&(t.youtubeapineeded=!0),(void 0!=e.data("ytid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&0==a.addedyt){t.youtubestarttime=jQuery.now(),a.addedyt=1;var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var d=document.getElementsByTagName("script")[0],r=!0;jQuery("head").find("*").each(function(){"https://www.youtube.com/iframe_api"==jQuery(this).attr("src")&&(r=!1)}),r&&d.parentNode.insertBefore(o,d)}if((void 0!=e.data("vimeoid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&(t.vimeoapineeded=!0),(void 0!=e.data("vimeoid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&0==a.addedvim){t.vimeostarttime=jQuery.now(),a.addedvim=1;var n=document.createElement("script"),d=document.getElementsByTagName("script")[0],r=!0;n.src="https://player.vimeo.com/api/player.js",jQuery("head").find("*").each(function(){"https://player.vimeo.com/api/player.js"==jQuery(this).attr("src")&&(r=!1)}),r&&d.parentNode.insertBefore(n,d)}return a},manageVideoLayer:function(i,r,n,l){if("stop"===t.compare_version(o).check)return!1;var u=i.data(),v=u.videoattributes,c=u.ytid,m=u.vimeoid,g="auto"===u.videopreload||"canplay"===u.videopreload||"canplaythrough"===u.videopreload||"progress"===u.videopreload?"auto":u.videopreload,y=u.videomp4,f=u.videowebm,h=u.videoogv,b=u.allowfullscreenvideo,w=u.videocontrols,k="http",T="loop"==u.videoloop?"loop":"loopandnoslidestop"==u.videoloop?"loop":"",x=void 0!=y||void 0!=f?"html5":void 0!=c&&String(c).length>1?"youtube":void 0!=m&&String(m).length>1?"vimeo":"none",V="html5"==u.audio?"audio":"video",L="html5"==x&&0==i.find(V).length?"html5":"youtube"==x&&0==i.find("iframe").length?"youtube":"vimeo"==x&&0==i.find("iframe").length?"vimeo":"none";switch(T=!0===u.nextslideatend?"":T,u.videotype=x,L){case"html5":"controls"!=w&&(w="");var V="video";"html5"==u.audio&&(V="audio",i.addClass("tp-audio-html5"));var C="";"video"===V&&(t.is_mobile()||t.isSafari11())&&("on"===u.autoplay||"true"===u.autoplay||!0===u.autoplay?C="muted playsinline autoplay":1!=u.videoinline&&"true"!==u.videoinline&&1!==u.videoinline||(C+=" playsinline"));var P="<"+V+" "+C+' style="object-fit:cover;background-size:cover;visible:hidden;width:100%; height:100%" class="" '+T+' preload="'+g+'">';"auto"==g&&(r.mediapreload=!0),void 0!=f&&"firefox"==t.get_browser().toLowerCase()&&(P=P+'<source src="'+f+'" type="video/webm" />'),void 0!=y&&(P=P+'<source src="'+y+'" type="video/mp4" />'),void 0!=h&&(P=P+'<source src="'+h+'" type="video/ogg" />'),P=P+"</"+V+">";var I="";"true"!==b&&!0!==b||(I='<div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-full-screen">Full-Screen</button></div>'),"controls"==w&&(P=P+'<div class="tp-video-controls"><div class="tp-video-button-wrap"><button type="button" class="tp-video-button tp-vid-play-pause">Play</button></div><div class="tp-video-seek-bar-wrap"><input  type="range" class="tp-seek-bar" value="0"></div><div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-mute">Mute</button></div><div class="tp-video-vol-bar-wrap"><input  type="range" class="tp-volume-bar" min="0" max="1" step="0.1" value="1"></div>'+I+"</div>"),i.data("videomarkup",P),i.append(P),(a&&1==i.data("disablevideoonmobile")||t.isIE(8))&&i.find(V).remove(),i.find(V).each(function(e){var a=this,o=jQuery(this);o.parent().hasClass("html5vid")||o.wrap('<div class="html5vid" style="position:relative;top:0px;left:0px;width:100%;height:100%; overflow:hidden;"></div>'),1!=o.parent().data("metaloaded")&&d(a,"loadedmetadata",function(e){p(e,r),t.resetVideo(e,r)}(i))});break;case"youtube":k="https","none"==w&&(v=v.replace("controls=1","controls=0"),-1==v.toLowerCase().indexOf("controls")&&(v+="&controls=0")),(!0===u.videoinline||"true"===u.videoinline||1===u.videoinline||i.hasClass("rs-background-video-layer"))&&(v+="&playsinline=1");var _=e(i.data("videostartat")),S=e(i.data("videoendat"));-1!=_&&(v=v+"&start="+_),-1!=S&&(v=v+"&end="+S);var j=v.split("origin="+k+"://"),A="";j.length>1?(A=j[0]+"origin="+k+"://",self.location.href.match(/www/gi)&&!j[1].match(/www/gi)&&(A+="www."),A+=j[1]):A=v;var O="true"===b||!0===b?"allowfullscreen":"";i.data("videomarkup",'<iframe type="text/html" src="'+k+"://www.youtube.com/embed/"+c+"?"+A+'" '+O+' width="100%" height="100%" style="opacity:0;visibility:hidden;width:100%;height:100%"></iframe>');break;case"vimeo":k="https",i.data("videomarkup",'<iframe src="'+k+"://player.vimeo.com/video/"+m+"?"+v+'" webkitallowfullscreen mozallowfullscreen allowfullscreen width="100%" height="100%" style="opacity:0;visibility:hidden;100%;height:100%"></iframe>');break}var Q=a&&"on"==i.data("noposteronmobile");if(void 0!=u.videoposter&&u.videoposter.length>2&&!Q)0==i.find(".tp-videoposter").length&&i.append('<div class="tp-videoposter noSwipe" style="cursor:pointer; position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:3;background-image:url('+u.videoposter+'); background-size:cover;background-position:center center;"></div>'),0==i.find("iframe").length&&i.find(".tp-videoposter").click(function(){if(t.playVideo(i,r),a){if(1==i.data("disablevideoonmobile"))return!1;punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut})}});else{if(a&&1==i.data("disablevideoonmobile"))return!1;0!=i.find("iframe").length||"youtube"!=x&&"vimeo"!=x||(i.removeData("vimeoplayer"),i.append(i.data("videomarkup")),s(i,r,!1))}"none"!=i.data("dottedoverlay")&&void 0!=i.data("dottedoverlay")&&1!=i.find(".tp-dottedoverlay").length&&i.append('<div class="tp-dottedoverlay '+i.data("dottedoverlay")+'"></div>'),i.addClass("HasListener"),1==i.data("bgvideo")&&punchgs.TweenLite.set(i.find("video, iframe"),{autoAlpha:0})}});var d=function(e,t,a){e.addEventListener?e.addEventListener(t,a,{capture:!1,passive:!0}):e.attachEvent(t,a,{capture:!1,passive:!0})},r=function(e,t,a){var i={};return i.video=e,i.videotype=t,i.settings=a,i},n=function(e,a){if(1==a.data("bgvideo")||1==a.data("forcecover")){1===a.data("forcecover")&&a.removeClass("fullscreenvideo").addClass("coverscreenvideo");var i=a.data("aspectratio");void 0===i&&i.split(":").length<=1&&a.data("aspectratio","16:9"),t.prepareCoveredVideo(e,a)}},s=function(i,o,d){var s=i.data(),p=i.find("iframe"),m="iframe"+Math.round(1e5*Math.random()+1),g=s.videoloop,y="loopandnoslidestop"!=g;if(g="loop"==g||"loopandnoslidestop"==g,n(o,i),p.attr("id",m),d&&i.data("startvideonow",!0),1!==i.data("videolistenerexist"))switch(s.videotype){case"youtube":var f=new YT.Player(m,{events:{onStateChange:function(a){var d=i.closest(".tp-simpleresponsive"),n=s.videorate,p=i.data("videostart"),m=u();if(a.data==YT.PlayerState.PLAYING)punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"mute"==i.data("volume")||t.lastToggleState(i.data("videomutetoggledby"))||!0===o.globalmute?f.mute():(f.unMute(),f.setVolume(parseInt(i.data("volume"),0)||75)),o.videoplaying=!0,v(i,o),y?o.c.trigger("stoptimer"):o.videoplaying=!1,o.c.trigger("revolution.slide.onvideoplay",r(f,"youtube",i.data())),t.toggleState(s.videotoggledby);else{if(0==a.data&&g){var h=e(i.data("videostartat"));-1!=h&&f.seekTo(h),f.playVideo(),t.toggleState(s.videotoggledby)}m||0!=a.data&&2!=a.data||!("on"==i.data("showcoveronpause")&&i.find(".tp-videoposter").length>0||1===i.data("bgvideo")&&i.find(".rs-fullvideo-cover").length>0)||(1===i.data("bgvideo")?punchgs.TweenLite.to(i.find(".rs-fullvideo-cover"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}):punchgs.TweenLite.to(i.find(".tp-videoposter"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.1,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),-1!=a.data&&3!=a.data&&(o.videoplaying=!1,o.tonpause=!1,c(i,o),d.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(f,"youtube",i.data())),void 0!=o.currentLayerVideoIsPlaying&&o.currentLayerVideoIsPlaying.attr("id")!=i.attr("id")||t.unToggleState(s.videotoggledby)),0==a.data&&1==i.data("nextslideatend")?(l(),i.data("nextslideatend-triggered",1),o.c.revnext(),c(i,o)):(c(i,o),o.videoplaying=!1,d.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(f,"youtube",i.data())),void 0!=o.currentLayerVideoIsPlaying&&o.currentLayerVideoIsPlaying.attr("id")!=i.attr("id")||t.unToggleState(s.videotoggledby))}},onReady:function(o){var d,r=t.is_mobile(),n=i.hasClass("tp-videolayer");if(r||t.isSafari11()){var l=n&&"off"!==i.data("autoplay");if(i.hasClass("rs-background-video-layer")||l){r&&n||(d=!0,f.setVolume(0),i.data("volume","mute"),f.mute(),clearTimeout(i.data("mobilevideotimr")),i.data("mobilevideotimr",setTimeout(function(){f.playVideo()},500)))}}d||"mute"!=i.data("volume")||(f.setVolume(0),f.mute());var u=s.videorate,p=i.data("videostart");if(i.addClass("rs-apiready"),void 0!=u&&o.target.setPlaybackRate(parseFloat(u)),i.find(".tp-videoposter").unbind("click"),i.find(".tp-videoposter").click(function(){a||f.playVideo()}),i.data("startvideonow")){s.player.playVideo();var v=e(i.data("videostartat"));-1!=v&&s.player.seekTo(v)}i.data("videolistenerexist",1)}}});i.data("player",f);break;case"vimeo":for(var h=p.attr("src"),b={},w=h,k=/([^&=]+)=([^&]*)/g,T;T=k.exec(w);)b[decodeURIComponent(T[1])]=decodeURIComponent(T[2]);h=void 0!=b.player_id?h.replace(b.player_id,m):h+"&player_id="+m,h=h.replace(/&api=0|&api=1/g,"");var x=t.is_mobile(),V=x||t.isSafari11(),L=i.hasClass("rs-background-video-layer");V&&L&&(h+="&background=1"),p.attr("src",h);var f=i.find("iframe")[0],C=jQuery("#"+m),P;if(i.data("vimeoplayer")?P=i.data("vimeoplayer"):(P=new Vimeo.Player(m),i.data("vimeoplayer",P)),V){var I;if(L)I=!0;else{var _=i.data("autoplay");"on"!==_&&"true"!==_&&!0!==_||(x&&i.data("autoplay",!1),I=!0)}I&&(P.setVolume(0),i.data("volume","mute"))}if(P.on("loaded",function(e){var t={};P.getVideoWidth().then(function(e){t.width=e,void 0!==t.width&&void 0!==t.height&&(i.data("aspectratio",t.width+":"+t.height),i.data("vimeoplayerloaded",!0),n(o,i))}),P.getVideoHeight().then(function(e){t.height=e,void 0!==t.width&&void 0!==t.height&&(i.data("aspectratio",t.width+":"+t.height),i.data("vimeoplayerloaded",!0),n(o,i))})}),i.addClass("rs-apiready"),P.on("play",function(e){i.data("nextslidecalled",0),punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),o.c.trigger("revolution.slide.onvideoplay",r(P,"vimeo",i.data())),o.videoplaying=!0,v(i,o),y?o.c.trigger("stoptimer"):o.videoplaying=!1,"mute"==i.data("volume")||t.lastToggleState(i.data("videomutetoggledby"))||!0===o.globalmute?P.setVolume(0):P.setVolume(parseInt(i.data("volume"),0)/100||.75),t.toggleState(s.videotoggledby)}),P.on("timeupdate",function(t){var a=e(i.data("videoendat"));if(i.data("currenttime",t.seconds),0!=a&&Math.abs(a-t.seconds)<1&&a>t.seconds&&1!=i.data("nextslidecalled"))if(g){P.play();var d=e(i.data("videostartat"));-1!=d&&P.setCurrentTime(d)}else 1==i.data("nextslideatend")&&(i.data("nextslideatend-triggered",1),i.data("nextslidecalled",1),o.c.revnext()),P.pause()}),P.on("ended",function(e){c(i,o),o.videoplaying=!1,o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(P,"vimeo",i.data())),1==i.data("nextslideatend")&&(i.data("nextslideatend-triggered",1),o.c.revnext()),void 0!=o.currentLayerVideoIsPlaying&&o.currentLayerVideoIsPlaying.attr("id")!=i.attr("id")||t.unToggleState(s.videotoggledby)}),P.on("pause",function(e){("on"==i.data("showcoveronpause")&&i.find(".tp-videoposter").length>0||1===i.data("bgvideo")&&i.find(".rs-fullvideo-cover").length>0)&&(1===i.data("bgvideo")?punchgs.TweenLite.to(i.find(".rs-fullvideo-cover"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}):punchgs.TweenLite.to(i.find(".tp-videoposter"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.1,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),o.videoplaying=!1,o.tonpause=!1,c(i,o),o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(P,"vimeo",i.data())),void 0!=o.currentLayerVideoIsPlaying&&o.currentLayerVideoIsPlaying.attr("id")!=i.attr("id")||t.unToggleState(s.videotoggledby)}),i.find(".tp-videoposter").unbind("click"),i.find(".tp-videoposter").click(function(){if(!a)return P.play(),!1}),i.data("startvideonow")){P.play();var S=e(i.data("videostartat"));-1!=S&&P.setCurrentTime(S)}i.data("videolistenerexist",1);break}else{var S=e(i.data("videostartat"));switch(s.videotype){case"youtube":d&&(s.player.playVideo(),-1!=S&&s.player.seekTo());break;case"vimeo":if(d){var P=i.data("vimeoplayer");P.play(),-1!=S&&P.seekTo(S)}break}}},l=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},u=function(){try{if(void 0!==window.fullScreen)return window.fullScreen;var e=5;return jQuery.browser.webkit&&/Apple Computer/.test(navigator.vendor)&&(e=42),screen.width==window.innerWidth&&Math.abs(screen.height-window.innerHeight)<e}catch(e){}},p=function(i,o,n){if(a&&1==i.data("disablevideoonmobile"))return!1;var s=i.data(),p="html5"==s.audio?"audio":"video",m=i.find(p),g=m[0],y=m.parent(),f=s.videoloop,h="loopandnoslidestop"!=f;if(f="loop"==f||"loopandnoslidestop"==f,y.data("metaloaded",1),1!=i.data("bgvideo")||"none"!==s.videoloop&&!1!==s.videoloop||(h=!1),void 0==m.attr("control")&&(0!=i.find(".tp-video-play-button").length||a||i.append('<div class="tp-video-play-button"><i class="revicon-right-dir"></i><span class="tp-revstop">&nbsp;</span></div>'),i.find("video, .tp-poster, .tp-video-play-button").click(function(){i.hasClass("videoisplaying")?g.pause():g.play()})),1==i.data("forcecover")||i.hasClass("fullscreenvideo")||1==i.data("bgvideo"))if(1==i.data("forcecover")||1==i.data("bgvideo")){y.addClass("fullcoveredvideo");var b=i.data("aspectratio");void 0!==b&&1!=b.split(":").length||i.data("aspectratio","16:9"),t.prepareCoveredVideo(o,i)}else y.addClass("fullscreenvideo");var w=i.find(".tp-vid-play-pause")[0],k=i.find(".tp-vid-mute")[0],T=i.find(".tp-vid-full-screen")[0],x=i.find(".tp-seek-bar")[0],V=i.find(".tp-volume-bar")[0];void 0!=w&&d(w,"click",function(){1==g.paused?g.play():g.pause()}),void 0!=k&&d(k,"click",function(){0==g.muted?(g.muted=!0,k.innerHTML="Unmute"):(g.muted=!1,k.innerHTML="Mute")}),void 0!=T&&T&&d(T,"click",function(){g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen&&g.webkitRequestFullscreen()}),void 0!=x&&(d(x,"change",function(){var e=g.duration*(x.value/100);g.currentTime=e}),d(x,"mousedown",function(){i.addClass("seekbardragged"),g.pause()}),d(x,"mouseup",function(){i.removeClass("seekbardragged"),g.play()})),d(g,"canplaythrough",function(){t.preLoadAudioDone(i,o,"canplaythrough")}),d(g,"canplay",function(){t.preLoadAudioDone(i,o,"canplay")}),d(g,"progress",function(){t.preLoadAudioDone(i,o,"progress")}),d(g,"timeupdate",function(){var t=100/g.duration*g.currentTime,a=e(i.data("videoendat")),d=g.currentTime;if(void 0!=x&&(x.value=t),0!=a&&-1!=a&&Math.abs(a-d)<=.3&&a>d&&1!=i.data("nextslidecalled"))if(f){g.play();var r=e(i.data("videostartat"));-1!=r&&(g.currentTime=r)}else 1==i.data("nextslideatend")&&(i.data("nextslideatend-triggered",1),i.data("nextslidecalled",1),o.just_called_nextslide_at_htmltimer=!0,o.c.revnext(),setTimeout(function(){o.just_called_nextslide_at_htmltimer=!1},1e3)),g.pause()}),void 0!=V&&d(V,"change",function(){g.volume=V.value}),d(g,"play",function(){i.data("nextslidecalled",0);var e=i.data("volume");e=void 0!=e&&"mute"!=e?parseFloat(e)/100:e,t.is_mobile()||t.isSafari11()||(!0===o.globalmute?g.muted=!0:g.muted=!1,e>1&&(e/=100),"mute"==e?g.muted=!0:void 0!=e&&(g.volume=e)),i.addClass("videoisplaying");var a="html5"==s.audio?"audio":"video";v(i,o),h&&"audio"!=a?(o.videoplaying=!0,o.c.trigger("stoptimer"),o.c.trigger("revolution.slide.onvideoplay",r(g,"html5",s))):(o.videoplaying=!1,"audio"!=a&&o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(g,"html5",s))),punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find(a),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});var d=i.find(".tp-vid-play-pause")[0],n=i.find(".tp-vid-mute")[0];void 0!=d&&(d.innerHTML="Pause"),void 0!=n&&g.muted&&(n.innerHTML="Unmute"),t.toggleState(s.videotoggledby)}),d(g,"pause",function(e){var a="html5"==s.audio?"audio":"video";!u()&&i.find(".tp-videoposter").length>0&&"on"==i.data("showcoveronpause")&&!i.hasClass("seekbardragged")&&(punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find(a),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),i.removeClass("videoisplaying"),o.videoplaying=!1,c(i,o),"audio"!=a&&o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(g,"html5",i.data()));var d=i.find(".tp-vid-play-pause")[0];void 0!=d&&(d.innerHTML="Play"),void 0!=o.currentLayerVideoIsPlaying&&o.currentLayerVideoIsPlaying.attr("id")!=i.attr("id")||t.unToggleState(s.videotoggledby)}),d(g,"ended",function(){l(),c(i,o),o.videoplaying=!1,c(i,o),"audio"!=p&&o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(g,"html5",i.data())),!0===i.data("nextslideatend")&&g.currentTime>0&&(1==!o.just_called_nextslide_at_htmltimer&&(i.data("nextslideatend-triggered",1),o.c.revnext(),o.just_called_nextslide_at_htmltimer=!0),setTimeout(function(){o.just_called_nextslide_at_htmltimer=!1},1500)),i.removeClass("videoisplaying")})},v=function(e,a){void 0==a.playingvideos&&(a.playingvideos=new Array),e.data("stopallvideos")&&void 0!=a.playingvideos&&a.playingvideos.length>0&&(a.lastplayedvideos=jQuery.extend(!0,[],a.playingvideos),jQuery.each(a.playingvideos,function(e,i){t.stopVideo(i,a)})),a.playingvideos.push(e),a.currentLayerVideoIsPlaying=e},c=function(e,t){void 0!=t.playingvideos&&jQuery.inArray(e,t.playingvideos)>=0&&t.playingvideos.splice(jQuery.inArray(e,t.playingvideos),1)}}(jQuery);